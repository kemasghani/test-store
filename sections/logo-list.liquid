{{ 'section-logo-list.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign max_items = section.settings.max_logos
  assign has_logos = false
  if section.blocks.size > 0
    assign has_logos = true
  endif
-%}

<div class="section-background color-{{ section.settings.color_scheme }}"></div>

<div
  id="LogoList-{{ section.id }}"
  class="
    section
    section--{{ section.settings.section_width }}
    color-{{ section.settings.color_scheme }}
    section-logo-list
    spacing-style
  "
  style="
    --padding-block-start: {{ section.settings.padding-block-start }}px;
    --padding-block-end: {{ section.settings.padding-block-end }}px;
    --logo-gap: {{ section.settings.gap }}px;
    --columns-desktop: {{ section.settings.columns_desktop }};
    --columns-mobile: {{ section.settings.mobile_columns }};
    --logo-opacity: {{ section.settings.logo_opacity | divided_by: 100.0 }};
  "
>
  <div class="section-logo-list__content">
    
    {%- if section.settings.heading != blank -%}
      <div class="section-logo-list__header" style="text-align: {{ section.settings.heading_alignment }}; margin-bottom: {{ section.settings.gap }}px;">
        <h2 class="h2">{{ section.settings.heading }}</h2>
      </div>
    {%- endif -%}

    <div class="logo-list-grid">
      {%- if has_logos -%}
        {%- for block in section.blocks limit: max_items -%}
          <div class="logo-list__item" {{ block.shopify_attributes }}>
            {%- if block.settings.link != blank -%}
              <a href="{{ block.settings.link }}" class="logo-list__link" aria-label="{{ block.settings.image.alt | default: block.settings.title | escape }}">
            {%- endif -%}

            {%- if block.settings.image != blank -%}
              {{
                block.settings.image
                | image_url: width: 400
                | image_tag:
                  loading: 'lazy',
                  class: 'logo-list__image',
                  widths: '100, 150, 200, 300',
                  alt: block.settings.image.alt | default: block.settings.title | escape
              }}
            {%- else -%}
              <div class="logo-list__placeholder">
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
              </div>
            {%- endif -%}

            {%- if block.settings.link != blank -%}
              </a>
            {%- endif -%}
          </div>
        {%- endfor -%}
      {%- else -%}
        {%- for i in (1..section.settings.columns_desktop) -%}
          <div class="logo-list__item">
             <div class="logo-list__placeholder">{{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}</div>
          </div>
        {%- endfor -%}
      {%- endif -%}
    </div>

  </div>
</div>

{% schema %}
{
  "name": "Logo List (Horizon)",
  "class": "ui-test-logo-list",
  "disabled_on": {
    "groups": ["header", "footer", "custom.popups"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our Partners"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "t:content.section_layout"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "t:settings.width",
      "options": [
        { "value": "page-width", "label": "t:options.page" },
        { "value": "full-width", "label": "t:options.full" }
      ],
      "default": "page-width"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Grid Settings"
    },
    {
      "type": "range",
      "id": "max_logos",
      "label": "Maximum logos to show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Columns on desktop",
      "min": 2,
      "max": 8,
      "step": 1,
      "default": 5
    },
    {
      "type": "select",
      "id": "mobile_columns",
      "label": "Columns on mobile",
      "options": [
        { "value": "2", "label": "2 Columns" },
        { "value": "3", "label": "3 Columns" }
      ],
      "default": "2"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Spacing between logos (Gap)",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "logo_opacity",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Default Logo Opacity",
      "default": 80
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 48
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Logo Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Brand Name",
          "info": "Used for alt text."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Logo List (Horizon)"
    }
  ]
}
{% endschema %}